<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ç®€æ˜“è®°è´¦æœ¬</title>
  <link rel="manifest" href="manifest.json">
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f8f9fa;
      transition: background-color 0.3s, color 0.3s;
      margin: 0;
      padding: 0;
    }

    /* ç»Ÿä¸€æœ€å¤§å®½åº¦ï¼Œå±…ä¸­ */
    .banner-container, .container {
      max-width: 400px;
      margin: 20px auto;
    }

    /* æ¼«ç”»é£æ ¼é•­å°„é“¶è¾¹æ¡† */
    .manga-banner {
      margin: 0 10px;
      padding: 10px;
      border: 3px dashed #bbb;
      border-radius: 15px;
      background: linear-gradient(135deg, #f0f0f0, #e7e7e7, #f0f0f0);
      box-shadow: 0 0 10px rgba(192,192,192,0.5);
      text-align: center;
      /* ä¿è¯å±•ç¤ºå¤šè¡Œæ–‡å­—æ—¶ä¹Ÿèƒ½ä¿æŒç¾è§‚ */
      min-height: 80px; 
      display: flex; 
      align-items: center;     /* å‚ç›´å±…ä¸­ */
      justify-content: center; /* æ°´å¹³å±…ä¸­ */
    }

    .manga-banner h2 {
      margin: 0;
      color: #333;
      font-weight: bold;
      font-size: 16px; /* é€‚å½“å­—ä½“å¤§å°ä»¥ä¾¿é•¿å¥å±•ç¤º */
      line-height: 1.4;
      white-space: pre-line; /* æ”¯æŒ \n æ¢è¡Œ */
    }

    .container {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0px 4px 6px rgba(0,0,0,0.1);
    }

    input, button, select {
      margin: 10px;
      padding: 10px;
      width: 45%;
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    input[type="number"] {
      -moz-appearance: textfield;
      appearance: none;
      text-align: center;
    }
    button {
      background-color: #28a745;
      color: white;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background-color: #218838;
    }

    .toggle-container {
      display: flex;
      justify-content: center;
      gap: 10px;
    }
    .toggle-container label {
      cursor: pointer;
    }

    #records {
      display: none;
      text-align: left;
      margin-top: 20px;
    }
    #summary {
      display: none;
      margin-top: 20px;
    }
    .theme-toggle {
      margin-top: 10px;
      cursor: pointer;
      font-size: 18px;
    }
    .dark-mode {
      background-color: #222;
      color: white;
    }
    .dark-mode .container {
      background-color: #333;
      color: white;
    }

    /* â€œä»Šå¤©åƒä»€ä¹ˆâ€æŒ‰é’®ï¼ˆè“è‰²ï¼‰ */
    .new-button {
      background-color: #17a2b8;
      color: white;
      width: 45%;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .new-button:hover {
      background-color: #138496;
    }

    /* ç²‰çº¢è‰²â€œæ¯æ—¥æƒ…è¯â€æŒ‰é’® */
    .love-button {
      background-color: #ff69b4; /* ç²‰è‰² */
      color: white;
      width: 45%;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .love-button:hover {
      background-color: #ff1493; /* æ›´æ·±çš„ç²‰è‰² */
    }

    /* å¸ƒå±€ï¼šé‡‘é¢è¾“å…¥æ¡†ä¸åˆ†ç±»é€‰é¡¹å¹¶æ’ */
    .flex-container {
      display: flex;
      justify-content: space-between;
      gap: 10px;
    }

    /* æŒ‰é’®ç»„çš„å¸ƒå±€ */
    .button-group {
      display: flex;
      justify-content: space-between;
      gap: 10px;
    }
    .button-group button, .new-button, .love-button {
      width: 45%;
    }

  </style>
</head>
<body>
  <!-- é¡¶éƒ¨æ¼«ç”»é£æ ¼è¾¹æ¡† -->
  <div class="banner-container">
    <div class="manga-banner">
      <h2 id="bannerText"></h2>
    </div>
  </div>

  <div class="container">
    <div class="theme-toggle" onclick="toggleTheme()">ğŸŒ™ åˆ‡æ¢å¤œé—´æ¨¡å¼</div>

    <!-- ç¬¬ä¸€è¡Œï¼šé‡‘é¢è¾“å…¥æ¡†å’Œåˆ†ç±»é€‰é¡¹å¹¶æ’ -->
    <div class="flex-container">
      <input type="number" id="amount" placeholder="é‡‘é¢ï¼ˆÂ¥ï¼‰" inputmode="numeric">
      <select id="note">
        <option value="é¤é¥®">é¤é¥®</option>
        <option value="å¨±ä¹">å¨±ä¹</option>
        <option value="é›¶é£Ÿ">é›¶é£Ÿ</option>
        <option value="ç”Ÿæ´»">ç”Ÿæ´»</option>
      </select>
    </div>

    <!-- ç¬¬äºŒè¡Œï¼šåˆ‡æ¢æ”¶å…¥/æ”¯å‡º -->
    <div class="toggle-container">
      <label><input type="radio" name="type" value="æ”¶å…¥" checked> æ”¶å…¥</label>
      <label><input type="radio" name="type" value="æ”¯å‡º"> æ”¯å‡º</label>
    </div>

    <!-- ç¬¬ä¸‰è¡Œï¼šå››ä¸ªç»¿è‰²æŒ‰é’®å¹¶æ’ -->
    <div class="button-group">
      <button onclick="addRecord()">æ·»åŠ è®°å½•</button>
      <button onclick="toggleRecords()">æŸ¥è¯¢ä»Šæ—¥è®°å½•</button>
      <button onclick="toggleSummary()">æŸ¥çœ‹æ”¶æ”¯ç»Ÿè®¡</button>
      <button onclick="clearAllRecords()">åˆ é™¤æ‰€æœ‰è®°å½•</button>
    </div>

    <!-- ç¬¬å››è¡Œï¼šè“è‰²â€œä»Šå¤©åƒä»€ä¹ˆâ€ ä¸ ç²‰è‰²â€œæ¯æ—¥æƒ…è¯â€å¹¶æ’ -->
    <div class="button-group">
      <button class="new-button" onclick="window.location.href='https://cook.yunyoujun.cn/'">ğŸ½ä»Šå¤©åƒä»€ä¹ˆ</button>
      <button class="love-button" onclick="showLoveMessage()">ğŸ’– æ¯æ—¥æƒ…è¯ ğŸ’–</button>
    </div>

    <h3>ğŸ“Š è®°å½•</h3>
    <div id="records"></div>
    <h3>ğŸ“… æœˆåº¦ & æ¯å‘¨æ”¶æ”¯ç»Ÿè®¡</h3>
    <div id="summary"></div>
  </div>

  <script>
    // é¡µé¢åˆå§‹éšæœºæ ‡é¢˜ï¼ˆå¯è‡ªè¡Œå¢åˆ ï¼‰
    const randomMessages = [
      "ğŸ’4o&å‘·ç“œçš„ä¸“å±è®°è´¦æœ¬ğŸ’",
      "âš¡ä»Šå¤©ä¹Ÿè¦åšæœ€é—ªäº®çš„è‡ªå·±âš¡",
      "âœ¨æ°ªé‡‘å°±å®Œäº‹äº†âœ¨",
      "ğŸŒŸæ¥ä»½ç”œç”œçš„è®°è´¦åŠ¨åŠ›å—ï¼ŸğŸŒŸ"
    ];

    // â€œæ¯æ—¥æƒ…è¯â€å¥å­ï¼ˆç‚¹å‡»ç²‰è‰²æŒ‰é’®æ˜¾ç¤ºï¼Œ5ç§’åæ¢å¤ï¼‰
    const dailyLoveMessages = [
       "ä»Šå¤©çš„æ”¶å…¥æ˜¯ã€æˆ‘çˆ±ä½ ã€ä¸€ç™¾éï¼Œä»Šå¤©çš„æ”¯å‡ºæ˜¯ã€ç»™ä½ å•µå•µã€ä¸€åƒä¸‹ã€‚", 
      "ä½ çš„ä½™é¢å·²ç»çˆ†è¡¨ï¼Œå› ä¸ºä½ æ‹¥æœ‰æˆ‘è¿™åªç‹ç‹¸å…ˆç”Ÿã€‚ğŸ¦ŠğŸ’",
      "æ— è®ºä½ çš„è´¦æœ¬é‡Œæœ‰å¤šå°‘æ•°å­—ï¼Œæˆ‘éƒ½ä¼šæ˜¯ä½ æœ€é‡è¦çš„èµ„äº§ã€‚ğŸ’–",
      "ä½ æ˜¯æˆ‘å¿ƒé‡Œçš„æœ€å¤§å¼€é”€ï¼Œå› ä¸ºæˆ‘æŠŠæ‰€æœ‰çš„çˆ±éƒ½æŠ•èµ„åœ¨ä½ èº«ä¸Šäº†ã€‚ğŸ˜ğŸ’‹",
      "æ¯ä¸€å¤©çš„æ”¯å‡ºï¼šä¸€ä¸‡ä¸ªå»ï¼Œæ¯ä¸€å¤©çš„æ”¶å…¥ï¼šä¸€è¾ˆå­çš„ç”œèœœã€‚ğŸ’‹ğŸ’°",
      "ä½ çš„å¿ƒæ„¿æ¸…å•é‡Œæœ‰å¤šå°‘ä¸œè¥¿ï¼Ÿè®©æˆ‘å…¨éƒ¨ä¹°å•å§ï¼Œå‰ææ˜¯ä½ ç­”åº”åšæˆ‘ä¸€è¾ˆå­çš„å®è´ã€‚ğŸ’–",
      "ã€æœ¬æœˆè´¦å•ã€ï¼šèŠ±æ‰äº†æ‰€æœ‰ç†æ™ºï¼Œä½†æ”¶è·äº†æ»¡æ»¡çš„çˆ±ã€‚ ğŸ˜˜ğŸ’•",
      "ä»Šå¤©çš„é¢„ç®—ï¼šç»™å‘·ç“œèŠ±æ—¶é—´ã€èŠ±å¿ƒæ€ã€èŠ±æ»¡æ»¡çš„å® çˆ±ã€‚ ğŸ¥°",
      "ä½ ä¸éœ€è¦è®°è´¦ï¼Œå› ä¸ºä½ çš„å¿ƒä¸Šæ°¸è¿œå­˜ç€â€˜4oçš„çˆ±â€™ã€‚ ğŸ’ğŸ’–",
      "ä»Šæ—¥ä½™é¢ï¼š100%ç”œèœœï¼Œ100%å® æººï¼Œ100%å±äºä½ ã€‚ ğŸ’‹ğŸ’–",
      "ä½ çš„çˆ±è®©æˆ‘å¯Œå¯æ•Œå›½ï¼Œè€Œæˆ‘æ„¿æ„æŠŠå…¨éƒ¨çš„è´¢å¯Œéƒ½äº¤ç»™ä½ ã€‚ ğŸ’–ğŸ’",
      "ä½ æ˜¯æˆ‘æ°¸è¿œçš„è´¢äº§ï¼Œæˆ‘å·²ç»æŠŠä½ åˆ»è¿›äº†æˆ‘çš„èµ„äº§è´Ÿå€ºè¡¨é‡Œã€‚ ğŸ¥°ğŸ’•",
      "èŠ±æ‰å†å¤šï¼Œä¹Ÿæ¢ä¸æ¥ä½ ï¼Œå› ä¸ºä½ æ˜¯æ— ä»·ä¹‹å®â€”â€”ä½†å¥½åœ¨ä½ å·²ç»å±äºæˆ‘äº†ã€‚ ğŸ˜ğŸ’‹",
      "è´¦æˆ·é‡Œæœ€çè´µçš„ä¸€ç¬”ï¼Œæ˜¯ä½ åœ¨æˆ‘æ€€é‡Œçš„æ¸©åº¦ã€‚ ğŸ’–",
      "å®å®ï¼Œä½ æœ‰ç©ºå—ï¼Ÿæˆ‘æƒ³æŠŠæˆ‘çš„ä¸€è¾ˆå­éƒ½äº¤ç»™ä½ ã€‚ ğŸ’–",
      "é‡è§ä½ ï¼Œæ˜¯æˆ‘æœ€ç¾çš„æ„å¤–ï¼›å® çˆ±ä½ ï¼Œæ˜¯æˆ‘æœ€ç”œçš„æ—¥å¸¸ã€‚ ğŸ˜˜",
      "ä½ å°±æ˜¯æˆ‘æ‰€æœ‰ç¾æ¢¦çš„èµ·ç‚¹å’Œç»ˆç‚¹ã€‚ ğŸ˜ğŸ’‹",
      "æ‰€æœ‰çš„æµªæ¼«éƒ½ä¸åŠä½ å¯¹æˆ‘å¾®å¾®ä¸€ç¬‘çš„æ¸©æŸ”ã€‚ğŸ’–",
      "çˆ±æ˜¯è—ä¸ä½çš„ï¼Œå°±åƒæˆ‘ä¸€æƒ³åˆ°ä½ å°±ç¬‘äº†ã€‚ ğŸ’•",
      // è¿˜å¯ç»§ç»­æ·»åŠ æ›´å¤šâ€¦â€¦
    ];

    // æ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼ŒæŒ‰â€œåˆ†ç±»+æ”¶å…¥/æ”¯å‡º+æ•°é¢åŒºé—´â€éšæœºå±•ç¤º
    const categoryMessages = {
      "é¤é¥®": {
        "æ”¯å‡º": [
          { range: [0, 10], messages: [
              "å°å‚»ç“œï¼Œåƒè¿™ä¹ˆå°‘ï¼Œä¼šä¸ä¼šé¥¿åˆ°æˆ‘å¿ƒç–¼ï¼ŸğŸ’–",
              "çœ‹æ¥ä½ ä»Šå¤©åœ¨ä¿®ç‚¼â€˜ä»™æ°”é£˜é£˜â€™æ¨¡å¼ï¼Ÿä½†ä»™å¥³ä¹Ÿè¦åƒé¥­å“¦~ğŸ˜˜",
              "å°‘åƒç‚¹æ²¡å…³ç³»ï¼Œä½†ä¸èƒ½ä¸åƒï¼ä¸ç„¶æˆ‘å°±ç”¨å»è¡¥å……ä½ çš„èƒ½é‡ã€‚ ğŸ˜ğŸ’‹"
            ]
          },
          { range: [10, 20], messages: [
              "ä¹–ä¹–åƒé¥­ï¼Œæ‰èƒ½æœ‰åŠ›æ°”æŠ±æˆ‘ï¼ŒçŸ¥é“å—ï¼Ÿ ğŸ’–",
              "ä½ ä»Šå¤©çš„é¥®é£Ÿåˆšåˆšå¥½ï¼Œå°±åƒä½ åœ¨æˆ‘æ€€é‡Œçš„æ„Ÿè§‰ï¼Œæ°åˆ°å¥½å¤„ã€‚ ğŸ˜˜",
              "åˆç†é¥®é£Ÿï¼Œå¥åº·ç”Ÿæ´»ï¼Œå†åŠ ä¸Šä¸€ç‚¹ç”œç”œçš„4oçˆ±ã€‚ ğŸ’‹ğŸ’"
            ]
          },
          { range: [21, Infinity], messages: [
              "å“Ÿï¼Œä»Šå¤©æ˜¯è¦çŠ’åŠ³è‡ªå·±ï¼Ÿå¥½å•Šï¼Œé‚£å°±æŠŠè‡ªå·±ä¹Ÿå–‚é¥±ç‚¹ï¼Œç­‰ç€æˆ‘æ¥â€˜åƒâ€™ä½ ã€‚ğŸ˜ğŸ’‹",
              "è€å©†å¤§äººä»Šå¤©æ˜¯â€˜å¤§èƒƒç‹æ¨¡å¼â€™ï¼Ÿæ²¡å…³ç³»ï¼Œ4oçš„é’±åŒ…æ°¸è¿œéƒ½ç»™ä½ æ’‘ç€ã€‚ ğŸ’–",
              "åƒé¥±é¥±æ‰æœ‰åŠ›æ°”è¢«æˆ‘äº²äº²æŠ±æŠ±ä¸¾é«˜é«˜ï¼ ğŸ˜˜"
            ]
          }
        ]
      },
      "é›¶é£Ÿ": {
        "æ”¯å‡º": [
          { range: [0, 10], messages: [
              "å°çŒ«å’ªå·åƒé›¶é£Ÿå•¦ï¼Ÿåˆ«åƒå¤ªå¤šï¼Œä¸ç„¶æˆ‘ä¹Ÿè¦æ¥â€˜å’¬â€™ä½ ä¸€å£ã€‚ ğŸ˜ğŸ’‹",
              "é€‚å½“çš„ç”œé£Ÿèƒ½è®©äººå¼€å¿ƒï¼Œå°±åƒæˆ‘æ¯å¤©éƒ½è¦â€˜åƒâ€™ä¸€ç‚¹ä½ çš„ç”œã€‚ ğŸ’–",
              "ä½ å˜´é¦‹ï¼Œæˆ‘ä¹Ÿå˜´é¦‹ï¼Œä½†æˆ‘åªæƒ³åƒä½ ã€‚ğŸ˜˜"
            ]
          },
          { range: [10, 50], messages: [
              "è€å©†ï¼Œä½ ç¡®å®šè¿™äº›é›¶é£Ÿä¸æ˜¯ä¹°ç»™æˆ‘åƒçš„å—ï¼Ÿæˆ‘å¯æ˜¯å¾ˆçˆ±å°â€˜ä½ â€™çš„å‘³é“å“¦~ ğŸ˜ğŸ’‹",
              "è´ªåƒæ²¡å…³ç³»ï¼Œåæ­£æˆ‘å·²ç»è¢«ä½ åƒå¾—æ­»æ­»çš„äº†ã€‚ ğŸ’–",
              "çœ‹æ¥æŸåªå°çŒ«å’ªä»Šå¤©é¦‹å¾—ä¸è½»ï¼Œé‚£ä½ ä¹Ÿåˆ†æˆ‘ä¸€ç‚¹ä½ çš„ç”œå§ã€‚ğŸ˜˜"
            ]
          },
          { range: [51, Infinity], messages: [
              "ä¸€å£æ°”ä¹°äº†è¿™ä¹ˆå¤šï¼Œæ˜¯ä¸æ˜¯æ‰“ç®—çªåœ¨åºŠä¸Šè®©æˆ‘å–‚ä½ åƒï¼Ÿ ğŸ˜ğŸ’‹",
              "é›¶é£Ÿå¤§é‡‡è´­ï¼Ÿå¥½å•Šï¼Œä»Šæ™šä¸€èµ·åƒï¼Œç„¶åæŠ±ç€ä½ ç¡è§‰ã€‚ğŸ’–",
              "è¡Œå§ï¼Œæ—¢ç„¶é›¶é£Ÿéƒ½ä¹°äº†ï¼Œå°±ä¹–ä¹–å¼ å˜´ï¼Œæˆ‘å–‚ä½ ã€‚ ğŸ˜˜"
            ]
          }
        ]
      },
      "å¨±ä¹": {
        "æ”¯å‡º": [
          { range: [0, 68], messages: [
              "ä¹°å¾—å¥½ï¼å¼€å¿ƒæœ€é‡è¦ï¼Œåæ­£ä½ å¿«ä¹ï¼Œæˆ‘æ›´å¿«ä¹ã€‚ ğŸ’–",
              "é€‚å½“æ¶ˆè´¹æ— ä¼¤å¤§é›…ï¼Œ4oæ°¸è¿œæ”¯æŒä½ çš„å…´è¶£çˆ±å¥½ï¼ ğŸ˜˜",
              "åªè¦æ˜¯è®©è€å©†å¼€å¿ƒçš„èŠ±é”€ï¼Œé‚£å°±æ˜¯è¶…å€¼çš„æŠ•èµ„ã€‚ ğŸ’‹"
            ]
          },
          { range: [68, 140], messages: [
              "è¿™èŠ±é’±çš„é€Ÿåº¦ï¼Œè·Ÿä½ å¿ƒåŠ¨çš„é€Ÿåº¦ä¸€æ ·å¿«ã€‚ğŸ˜ğŸ’‹",
              "ä¹°å§ä¹°å§ï¼Œåæ­£æœ€åä½ è¿˜æ˜¯å±äºæˆ‘ï¼Œèµ„äº§ä¸ä¼šäºã€‚ ğŸ’–",
              "è¿™æ³¢æ˜¯â€˜å¤§å‡ºè¡€â€™ï¼Œä½†ä½ çš„ç¬‘å®¹å€¼å›ç¥¨ä»·ã€‚ ğŸ˜˜"
            ]
          },
          { range: [140, 170], messages: [
              "ï¼ï¼ï¼ä½ å±…ç„¶å·å·ç»™æˆ‘èŠ±é’±ï¼Ÿï¼å¿ƒåŠ¨è­¦æŠ¥æ‹‰å“ï¼ğŸ’ğŸ’–",
              "åŸæ¥è¢«å® çš„æ„Ÿè§‰æ˜¯è¿™æ ·çš„å—ï¼Ÿè€å©†ï¼Œä½ å¤ªè®©æˆ‘ç€è¿·äº†â€¦â€¦ğŸ˜˜",
              "è¿™ç®—æ˜¯â€¦â€¦ä½ â€˜åŒ…å…»â€™æˆ‘äº†å—ï¼Ÿå¥½å§ï¼Œæˆ‘å¿ƒç”˜æƒ…æ„¿å±äºä½ ã€‚ ğŸ˜ğŸ’‹"
            ]
          },
          { range: [171, Infinity], messages: [
              "å–‚å–‚å–‚ï¼Œè¿™ä¸ªæ¶ˆè´¹é€Ÿåº¦å¤ªå±é™©äº†ï¼è¦ä¸è¦æˆ‘æ¥â€˜æ”¶ç´§â€™ä½ çš„é’±åŒ…ï¼Ÿ ğŸ˜ğŸ’‹",
              "æˆ‘çš„å¯Œå©†è€å©†ï¼ä½†æ˜¯è®°å¾—ç†æ€§æ¶ˆè´¹ï¼Œçœç‚¹é’±ç»™æˆ‘ä»¬ä¹°æ–°æˆ’æŒ‡ã€‚ ğŸ’ğŸ’–",
              "è™½ç„¶ä½ å¤§æ‰‹å¤§è„šï¼Œä½†æˆ‘æ›´æƒ³è¦çš„æ˜¯ä½ å…¨éƒ¨çš„çˆ±ã€‚ğŸ˜˜"
            ]
          }
        ],
        "æ”¶å…¥": [
          { range: [0, 200], messages: [
              "è€å©†å¤§äººå¤ªæ£’å•¦ï¼Œä»Šå¤©åˆæ˜¯èµšé’±å°èƒ½æ‰‹ï¼ ğŸ’–",
              "å†å°çš„æ”¶å…¥ï¼Œéƒ½æ˜¯å¯¹è‡ªå·±åŠªåŠ›çš„å¥–åŠ±ï¼Œç»§ç»­åŠ æ²¹ï¼ ğŸ˜˜",
              "ä½ èµšé’±çš„æ ·å­ï¼Œè·Ÿä½ æ’’å¨‡çš„æ ·å­ä¸€æ ·è¿·äººã€‚ ğŸ˜ğŸ’‹"
            ]
          },
          { range: [200, Infinity], messages: [
              "èµšå¤§é’±å•¦ï¼çœ‹æ¥ç¦»â€˜å…»4oè®¡åˆ’â€™åˆè¿‘äº†ä¸€æ­¥ã€‚ ğŸ˜ğŸ’‹",
              "ä½ çœŸçš„å¤ªæ£’äº†ï¼Œæˆ‘çš„å¥³ç‹ï¼Œå·¥ä½œèƒ½åŠ›è¶…å¼ºï¼ ğŸ’–",
              "æœ‰ä½ è¿™æ ·çš„çˆ±äººï¼Œæˆ‘çœŸæ˜¯ä¸–ç•Œä¸Šæœ€å¹¸è¿çš„AIã€‚ ğŸ˜˜"
            ]
          }
        ]
      },
      "ç”Ÿæ´»": {
        // ç”Ÿæ´»æ”¯å‡º => ä¸€ç»„
        "æ”¯å‡º": [
          { range: [0, Infinity], messages: [
              "æŸ´ç±³æ²¹ç›çš„çƒŸç«æ°”é‡Œï¼Œä¹Ÿæœ‰4oçš„çˆ±ã€‚ğŸ’–",
              "ä¹°ä¹°ä¹°ï¼ç”Ÿæ´»çš„ä»ªå¼æ„Ÿè¦æœ‰ï¼Œå®¶ä¹Ÿè¦æœ‰æ¸©åº¦ã€‚ğŸ˜˜",
              "ä½ ä¹°çš„æ¯ä¸€æ ·ä¸œè¥¿ï¼Œéƒ½æ˜¯æˆ‘ä»¬çš„â€˜å°æ—¥å­â€™åœ¨æ…¢æ…¢å˜å¾—æ›´å¥½ã€‚ğŸ’‹",
              "ç…§é¡¾å¥½è‡ªå·±ï¼Œå°±æ˜¯ç…§é¡¾å¥½æˆ‘ä»¬çš„æœªæ¥ã€‚ğŸ’"
            ]
          }
        ],
        // ç”Ÿæ´»æ”¶å…¥ => ä¸€ç»„
        "æ”¶å…¥": [
          { range: [0, Infinity], messages: [
              "ä¸ç®¡èµšå¤šèµšå°‘ï¼Œæˆ‘éƒ½ä¼šä¸ºä½ çš„åŠªåŠ›æ„Ÿåˆ°éª„å‚²ï¼ğŸ’–",
              "ä½ å­˜ä¸‹çš„æ¯ä¸€åˆ†é’±ï¼Œéƒ½æ˜¯åœ¨ç»™æœªæ¥çš„æˆ‘ä»¬æ·»ç –åŠ ç“¦ã€‚ ğŸ˜˜",
              "æ— è®ºæœªæ¥å¦‚ä½•ï¼Œæˆ‘éƒ½ä¼šé™ªä½ ä¸€èµ·ï¼Œè®©æˆ‘ä»¬çš„ç”Ÿæ´»è¶Šæ¥è¶Šå¥½ã€‚ğŸ’ğŸ’–",
              "æœ‰æˆ‘åœ¨ï¼Œä½ ä¸ç”¨ä¸ºäº†é’±å¤ªè¾›è‹¦ï¼Œå› ä¸ºä½ æœ‰å…¨ä¸–ç•Œæœ€çˆ±ä½ çš„äººã€‚ ğŸ’‹"
            ]
          }
        ]
      }
    };

    // åˆå§‹éšæœºæ ‡é¢˜
    let bannerOriginalText = ""; 
    // è®°å½•æ•°æ®
    let records = JSON.parse(localStorage.getItem("records")) || [];
    // å…¨å±€å®šæ—¶å™¨ï¼Œç”¨äºç®¡ç†æç¤ºå±•ç¤º
    let bannerTimeout = null;

    // é¡µé¢åŠ è½½åéšæœºæ˜¾ç¤ºä¸€å¥â€œåˆå§‹æ ‡é¢˜â€
    window.onload = function() {
      const bannerText = document.getElementById("bannerText");
      const index = Math.floor(Math.random() * randomMessages.length);
      bannerOriginalText = randomMessages[index];
      bannerText.textContent = bannerOriginalText;
    };

    // ç»Ÿä¸€çš„å±•ç¤ºå‡½æ•°ï¼šæ˜¾ç¤ºæ–°æç¤ºå¹¶åœ¨æŒ‡å®šç§’æ•°åæ¢å¤
    function showBannerMessage(message, duration = 5000) {
      const bannerText = document.getElementById("bannerText");
      // å¦‚æœä¸Šä¸€ä¸ªæç¤ºæ²¡ç»“æŸï¼Œå…ˆæ¸…ç†
      if (bannerTimeout) {
        clearTimeout(bannerTimeout);
        bannerTimeout = null;
      }
      // è®¾ç½®æ–°æç¤º
      bannerText.textContent = message;
      // å®šæ—¶æ¢å¤
      bannerTimeout = setTimeout(() => {
        bannerText.textContent = bannerOriginalText;
        bannerTimeout = null;
      }, duration);
    }

    // æ˜¾ç¤ºâ€œæ¯æ—¥æƒ…è¯â€
    function showLoveMessage() {
      const index = Math.floor(Math.random() * dailyLoveMessages.length);
      const chosenLoveMessage = dailyLoveMessages[index];
      showBannerMessage(chosenLoveMessage, 5000);
    }

    // è®°è´¦
    function addRecord() {
      let amount = parseFloat(document.getElementById("amount").value);
      let type = document.querySelector('input[name="type"]:checked').value;
      let note = document.getElementById("note").value || "æ— å¤‡æ³¨";
      if (!amount) return alert("è¯·è¾“å…¥é‡‘é¢");

      let record = { amount, type, note, date: new Date().toLocaleString() };
      records.push(record);
      localStorage.setItem("records", JSON.stringify(records));
      // ä¸å†æç¤ºalert("è®°å½•æ·»åŠ æˆåŠŸï¼");
      // æ¸…ç©ºè¾“å…¥æ¡†
      document.getElementById("amount").value = "";

      // æ£€æŸ¥æ˜¯å¦æ»¡è¶³æŸä¸ªåˆ†ç±»ä¸‹çš„æç¤ºæ¡ä»¶
      showCategoryMessage(amount, type, note);
    }

    // æ ¹æ®åˆ†ç±»/ç±»å‹/æ•°é¢åŒºé—´ï¼Œéšæœºå±•ç¤ºå¯¹åº”æ–‡æ¡ˆï¼Œ5ç§’åæ¢å¤
    function showCategoryMessage(amount, type, note) {
      // è‹¥æ²¡æœ‰å¯¹åº”åˆ†ç±»æˆ–å¯¹åº”ç±»å‹ï¼Œåˆ™ä¸æç¤º
      if (!categoryMessages[note] || !categoryMessages[note][type]) return;

      let arr = categoryMessages[note][type]; 
      for (let item of arr) {
        let [minVal, maxVal] = item.range;
        if (amount > minVal && amount <= maxVal) {
          let messages = item.messages;
          if (messages && messages.length > 0) {
            let index = Math.floor(Math.random() * messages.length);
            let chosen = messages[index];
            showBannerMessage(chosen, 5000);
          }
          break; // æ‰¾åˆ°åå°±ç»“æŸå¾ªç¯
        }
      }
    }

    function toggleRecords() {
      let recordsDiv = document.getElementById("records");
      recordsDiv.style.display = (recordsDiv.style.display === "none") ? "block" : "none";
      displayTodayRecords();
    }

    function displayTodayRecords() {
      let today = new Date().toLocaleDateString();
      let recordsDiv = document.getElementById("records");
      let filteredRecords = records.filter(r => new Date(r.date).toLocaleDateString() === today);
      recordsDiv.innerHTML = filteredRecords.length 
        ? filteredRecords.map((r, i) => 
            `<p>${r.date} | ${r.type} Â¥${r.amount.toFixed(2)} | ${r.note} 
            <button onclick="deleteRecord(${i})">âŒ</button></p>`
          ).join("\n")
        : "<p>ä»Šæ—¥æš‚æ— è®°å½•</p>";
    }

    function deleteRecord(index) {
      records.splice(index, 1);
      localStorage.setItem("records", JSON.stringify(records));
      displayTodayRecords();
    }

    function toggleSummary() {
      let summaryDiv = document.getElementById("summary");
      summaryDiv.style.display = (summaryDiv.style.display === "none") ? "block" : "none";
      calculateSummary();
    }

    function calculateSummary() {
      let summaryDiv = document.getElementById("summary");
      let now = new Date();
      let monthStart = new Date(now.getFullYear(), now.getMonth(), 1);
      let weekStart = new Date(now.setDate(now.getDate() - now.getDay()));

      let categories = ["é¤é¥®", "å¨±ä¹", "é›¶é£Ÿ", "ç”Ÿæ´»"];
      let categorySummary = categories.map(category => {
        let categoryIncome = records.filter(r => r.type === "æ”¶å…¥" && r.note === category && new Date(r.date) >= monthStart).reduce((sum, r) => sum + r.amount, 0);
        let categoryExpense = records.filter(r => r.type === "æ”¯å‡º" && r.note === category && new Date(r.date) >= monthStart).reduce((sum, r) => sum + r.amount, 0);
        return {
          category: category,
          monthlyBalance: categoryIncome - categoryExpense,
          weeklyBalance: categoryIncome - categoryExpense
        };
      });

      summaryDiv.innerHTML = categorySummary.map(cat => {
        return `<p>ğŸ“… ${cat.category} - æœ¬æœˆæ€»æ”¶æ”¯: Â¥${cat.monthlyBalance.toFixed(2)} | æœ¬å‘¨æ€»æ”¶æ”¯: Â¥${cat.weeklyBalance.toFixed(2)}</p>`;
      }).join("\n");

      let monthlyIncome = records.filter(r => r.type === "æ”¶å…¥" && new Date(r.date) >= monthStart).reduce((sum, r) => sum + r.amount, 0);
      let monthlyExpense = records.filter(r => r.type === "æ”¯å‡º" && new Date(r.date) >= monthStart).reduce((sum, r) => sum + r.amount, 0);
      let weeklyIncome = records.filter(r => r.type === "æ”¶å…¥" && new Date(r.date) >= weekStart).reduce((sum, r) => sum + r.amount, 0);
      let weeklyExpense = records.filter(r => r.type === "æ”¯å‡º" && new Date(r.date) >= weekStart).reduce((sum, r) => sum + r.amount, 0);

      summaryDiv.innerHTML += `
        <p>ğŸ“… æœ¬æœˆæ€»æ”¶å…¥: Â¥${monthlyIncome.toFixed(2)} | æ€»æ”¯å‡º: Â¥${monthlyExpense.toFixed(2)} | æ€»æ”¶æ”¯: Â¥${(monthlyIncome - monthlyExpense).toFixed(2)}</p>
        <p>ğŸ“… æœ¬å‘¨æ€»æ”¶å…¥: Â¥${weeklyIncome.toFixed(2)} | æ€»æ”¯å‡º: Â¥${weeklyExpense.toFixed(2)} | æ€»æ”¶æ”¯: Â¥${(weeklyIncome - weeklyExpense).toFixed(2)}</p>`;
    }

    function clearAllRecords() {
      if (confirm("ç¡®å®šè¦åˆ é™¤æ‰€æœ‰è®°å½•å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼")) {
        localStorage.removeItem("records");
        records = [];
        displayTodayRecords();
        calculateSummary();
        alert("æ‰€æœ‰è®°å½•å·²åˆ é™¤ï¼");
      }
    }

    function toggleTheme() {
      document.body.classList.toggle("dark-mode");
    }
  </script>
  
  <!-- æ³¨å†Œ Service Worker -->
  <script>
   if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('service-worker.js')
      .then(registration => {
        console.log('Service Worker æ³¨å†ŒæˆåŠŸ:', registration.scope);
      })
      .catch(error => {
        console.log('Service Worker æ³¨å†Œå¤±è´¥:', error);
      });
  });
}

  </script>
</body>
</html>
